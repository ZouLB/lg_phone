"use strict";loader.define(["pages/common/common"],function(e,t,a,o){function r(){e.queryData("resident",{},function(e,t){p(t.timeNum),s(t.rank),c(t.sex),i(t),m(t.age),$(".province").click(),n(t.rank.map(function(e){return{name:e[0].replace("街道",""),value:parseFloat(e[1])}}))})}function i(e){$(".province").click(function(){$(this).removeClass("primary-border").addClass("primary"),$(".outProvince").removeClass("primary").addClass("primary-border"),l(e.province)}),$(".outProvince").click(function(){$(this).removeClass("primary-border").addClass("primary"),$(".province").removeClass("primary").addClass("primary-border"),l(e.outProvince)})}function n(t){e.queryData("lg_geo",{},function(e,a){var o={};a.geoJson.features.forEach(function(e){e.properties.name=e.properties.name.replace("街道",""),o[e.properties.name]=e.properties.cp}),echarts.registerMap("lg",a);for(var r=[],i=0;i<t.length;i++){var n=o[t[i].name];n&&r.push({name:t[i].name,value:n.concat(t[i].value)})}var l=echarts.init(document.getElementById("map-chart"),"walden"),s={backgroundColor:"#F5F5F5",tooltip:{show:!1},animation:!1,visualMap:{min:24.77,max:55.72,show:!1,left:"right",top:"bottom",itemWidth:15,itemHeight:100,precision:2,inRange:{color:["rgb(156,199,244)","rgba(34,150,231, 1)"]}},geo:{map:"lg",zoom:1.25,roam:!1,label:{normal:{show:!0,textStyle:{color:"rgb(40,84,123)"}}},itemStyle:{normal:{areaColor:"rgba(0,114,198,.9)",borderColor:"#fff"}}},series:[{type:"scatter",coordinateSystem:"geo",symbolSize:50,data:r,symbol:"image://./images/tip.png",symbolOffset:[0,"-50%"],label:{normal:{show:!0,distance:-23,color:"#fff",formatter:function(e){return e.data.value[2]+"万"},position:"top"},emphasis:{show:!0}},itemStyle:{normal:{color:"#fff"}}},{type:"map",geoIndex:0,data:t}]};l.setOption(s,!0),l.on("mouseover",function(e){l.dispatchAction({type:"downplay"})})})}function l(e){for(var t=echarts.init(document.getElementById("bar-chart"),"walden"),a=[],o=[],r=0;r<e.length;r++)a.push(e[r][0]),o.push({value:e[r][1],name:e[r][0]});var i={xAxis:{type:"category",data:a,name:"地区",axisLine:{lineStyle:{color:"#999"}},axisTick:{length:3}},tooltip:{trigger:"axis",formatter:"{b}<br/>常驻人口：{c}万人"},yAxis:{type:"value",name:"人口(万人)",axisLine:{lineStyle:{color:"#999"}},axisTick:{length:3}},grid:{top:"16%",bottom:"16%",right:"14%"},series:[{data:o,type:"bar",barWidth:"40%",label:{normal:{show:!0,position:"top",textStyle:{color:"#aaa"}}},itemStyle:{normal:{color:"#2EAAFD"}}}]};t.setOption(i,!0)}function s(e){var e=e,t=template("tpl-list-resident",{listData:e});$("#tpl-list-resident-content").html(t)}function m(e){for(var t=echarts.init(document.getElementById("chart"),"walden"),a=[],o=[],r=0;r<e.length;r++)a.push(e[r][0]),o.push({value:e[r][1],name:e[r][0]});var i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:"{b}<br/>占比：{c}%"},grid:{top:"16%",bottom:"16%",left:"18%",right:"12%"},xAxis:{type:"value",boundaryGap:[0,.01],name:"%",axisLine:{lineStyle:{color:"#999"}},axisTick:{length:3}},yAxis:{type:"category",data:a,name:"年龄",axisLine:{lineStyle:{color:"#999"}},axisTick:{length:3}},series:[{name:"2011年",type:"bar",barWidth:"40%",data:o,label:{normal:{show:!0,position:"right",textStyle:{color:"#aaa"},formatter:"{@score}%"}},itemStyle:{normal:{color:"#2EAAFD"}}}]};t.setOption(i,!0)}function c(e){var t=new Array(10).join(",").split(",");console.log(e[0]);var a=template("tpl-list-man",{manlistData:t,sex:e[0][1]});$("#tpl-list-man-content").html(a);var a=template("tpl-list-woman",{manlistData:t,sex:e[1][1]});$("#tpl-list-woman-content").html(a)}function p(e){for(var t=echarts.init(document.getElementById("line-chart"),"walden"),a=[],o=[],r=0;r<e.length;r++)a.push(e[r][0]),o.push({value:e[r][1],name:e[r][0]});var i={xAxis:{type:"category",data:a,name:"日期",axisLine:{lineStyle:{color:"#999"}},axisTick:{length:3}},tooltip:{trigger:"axis",formatter:"{b}<br/>人口数：{c}万人"},yAxis:{type:"value",name:"人口(万人)",min:400,axisLine:{lineStyle:{color:"#999"}},axisTick:{length:3}},grid:{top:"16%",bottom:"16%",right:"13%",left:"12%"},series:[{data:o,type:"line",smooth:!0,areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#0072c6"},{offset:1,color:"#fff"}])}},itemStyle:{normal:{color:"#2EAAFD",lineStyle:{color:"#2EAAFD"}}}}]};t.setOption(i,!0)}var y={};y.init=function(){r()},y.init(),o.exports=y});